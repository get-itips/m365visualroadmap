!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).milestones=n()}(this,function(){function k(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function C(t,n,e){n=o(n);var r=t,n=N()?Reflect.construct(n,[],o(t).constructor):n.apply(t,e);if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");t=r;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t,n){if(n)for(var e=t.prototype,r=n,i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,B(o.key),o)}return Object.defineProperty(t,"prototype",{writable:!1}),t}function D(t,n){var e,r,i,o,u="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(u)return i=!(r=!0),{s:function(){u=u.call(t)},n:function(){var t=u.next();return r=t.done,t},e:function(t){i=!0,e=t},f:function(){try{r||null==u.return||u.return()}finally{if(i)throw e}}};if(Array.isArray(t)||(u=G(t))||n)return u&&(t=u),o=0,{s:n=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,n,e){var r=function(t,n){for(;!{}.hasOwnProperty.call(t,n)&&null!==(t=o(t)););return t}(t,n);if(r)return(r=Object.getOwnPropertyDescriptor(r,n)).get?r.get.call(arguments.length<3?t:e):r.value}).apply(null,arguments)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(N=function(){return!!t})()}function U(){U=function(){return u};var c,u={},t=Object.prototype,l=t.hasOwnProperty,s=Object.defineProperty||function(t,n,e){t[n]=e.value},n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",e=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function o(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{o({},"")}catch(c){o=function(t,n,e){return t[n]=e}}function a(t,n,e,r){var i,o,u,a,n=n&&n.prototype instanceof v?n:v,n=Object.create(n.prototype),r=new k(r||[]);return s(n,"_invoke",{value:(i=t,o=e,u=r,a=h,function(t,n){if(a===g)throw Error("Generator is already running");if(a===d){if("throw"===t)throw n;return{value:c,done:!0}}for(u.method=t,u.arg=n;;){var e=u.delegate;if(e){e=function t(n,e){var r=e.method,i=n.iterator[r];if(i===c)return e.delegate=null,"throw"===r&&n.iterator.return&&(e.method="return",e.arg=c,t(n,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;r=f(i,n.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,y;i=r.arg;return i?i.done?(e[n.resultName]=i.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}(e,u);if(e){if(e===y)continue;return e}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(a===h)throw a=d,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);a=g;e=f(i,o,u);if("normal"===e.type){if(a=u.done?d:p,e.arg===y)continue;return{value:e.arg,done:u.done}}"throw"===e.type&&(a=d,u.method="throw",u.arg=e.arg)}})}),n}function f(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}u.wrap=a;var h="suspendedStart",p="suspendedYield",g="executing",d="completed",y={};function v(){}function m(){}function w(){}var n={},b=(o(n,r,function(){return this}),Object.getPrototypeOf),b=b&&b(b(C([]))),_=(b&&b!==t&&l.call(b,r)&&(n=b),w.prototype=v.prototype=Object.create(n));function x(t){["next","throw","return"].forEach(function(n){o(t,n,function(t){return this._invoke(n,t)})})}function M(u,a){var n;s(this,"_invoke",{value:function(e,r){function t(){return new a(function(t,n){!function n(t,e,r,i){var o,t=f(u[t],u,e);if("throw"!==t.type)return(e=(o=t.arg).value)&&"object"==typeof e&&l.call(e,"__await")?a.resolve(e.__await).then(function(t){n("next",t,r,i)},function(t){n("throw",t,r,i)}):a.resolve(e).then(function(t){o.value=t,r(o)},function(t){return n("throw",t,r,i)});i(t.arg)}(e,r,t,n)})}return n=n?n.then(t,t):t()}})}function T(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function A(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(n){if(n||""===n){var e,t=n[r];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length))return e=-1,(t=function t(){for(;++e<n.length;)if(l.call(n,e))return t.value=n[e],t.done=!1,t;return t.value=c,t.done=!0,t}).next=t}throw new TypeError(typeof n+" is not iterable")}return s(_,"constructor",{value:m.prototype=w,configurable:!0}),s(w,"constructor",{value:m,configurable:!0}),m.displayName=o(w,i,"GeneratorFunction"),u.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,o(t,i,"GeneratorFunction")),t.prototype=Object.create(_),t},u.awrap=function(t){return{__await:t}},x(M.prototype),o(M.prototype,e,function(){return this}),u.AsyncIterator=M,u.async=function(t,n,e,r,i){void 0===i&&(i=Promise);var o=new M(a(t,n,e,r),i);return u.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},x(_),o(_,i,"Generator"),o(_,r,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),u.keys=function(t){var n,e=Object(t),r=[];for(n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},u.values=C,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&l.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=c),!!n}for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var u=l.call(i,"catchLoc"),a=l.call(i,"finallyLoc");if(u&&a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!a)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc?null:i)?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),y},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),A(e),y}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var e,r,i=this.tryEntries[n];if(i.tryLoc===t)return"throw"===(e=i.completion).type&&(r=e.arg,A(i)),r}throw Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:C(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=c),y}},u}function R(t,n){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function O(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,i,o,u,a=[],c=!0,l=!1;try{if(o=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;c=!1}else for(;!(c=(r=o.call(e)).done)&&(a.push(r.value),a.length!==n);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=e.return&&(u=e.return(),Object(u)!==u))return}finally{if(l)throw i}}return a}}(t,n)||G(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,n,e,r){var i=E(o(t.prototype),n,e);return 2&r&&"function"==typeof i?function(t){return i.apply(e,t)}:i}function B(t){t=function(t,n){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return String(t);if("object"!=typeof(e=e.call(t,n)))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==typeof t?t:t+""}function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,n){var e;if(t)return"string"==typeof t?k(t,n):"Map"===(e="Object"===(e={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?k(t,n):void 0}function Z(t){var e="function"==typeof Map?new Map:void 0;return function(t){if(null===t||!function(n){try{return-1!==Function.toString.call(n).indexOf("[native code]")}catch(t){return"function"==typeof n}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,n,e){var r;return N()?Reflect.construct.apply(null,arguments):((r=[null]).push.apply(r,n),n=new(t.bind.apply(t,r)),e&&R(n,e.prototype),n)}(t,arguments,o(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),R(n,t)}(t)}var V="http://www.w3.org/1999/xhtml",Q={svg:"http://www.w3.org/2000/svg",xhtml:V,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function W(t){var n=t+="",e=n.indexOf(":");return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Q.hasOwnProperty(n)?{space:Q[n],local:t}:t}function $(t){t=W(t);return(t.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===V&&t.documentElement.namespaceURI===V?t.createElement(e):t.createElementNS(n,e)}})(t)}function X(){}function J(t){return null==t?X:function(){return this.querySelector(t)}}function K(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function tt(){return[]}function nt(n){return function(t){return t.matches(n)}}var et=Array.prototype.find;function rt(){return this.firstElementChild}var it=Array.prototype.filter;function ot(){return Array.from(this.children)}function ut(t){return new Array(t.length)}function at(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function ct(t,n,e,r,i,o){for(var u,a=0,c=n.length,l=o.length;a<l;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new at(t,o[a]);for(;a<c;++a)(u=n[a])&&(i[a]=u)}function lt(t,n,e,r,i,o,u){for(var a,c,l=new Map,s=n.length,f=o.length,h=new Array(s),p=0;p<s;++p)(a=n[p])&&(h[p]=c=u.call(a,a.__data__,p,n)+"",l.has(c)?i[p]=a:l.set(c,a));for(p=0;p<f;++p)c=u.call(t,o[p],p,o)+"",(a=l.get(c))?((r[p]=a).__data__=o[p],l.delete(c)):e[p]=new at(t,o[p]);for(p=0;p<s;++p)(a=n[p])&&l.get(h[p])===a&&(i[p]=a)}function st(t){return t.__data__}function ft(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}function ht(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function pt(t){return t.trim().split(/^|\s+/)}function gt(t){return t.classList||new dt(t)}function dt(t){this._node=t,this._names=pt(t.getAttribute("class")||"")}function yt(t,n){for(var e=gt(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function vt(t,n){for(var e=gt(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function mt(){this.textContent=""}function wt(){this.innerHTML=""}function bt(){this.nextSibling&&this.parentNode.appendChild(this)}function _t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xt(){return null}function Mt(){var t=this.parentNode;t&&t.removeChild(this)}function Tt(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function At(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function kt(o){return function(){var t=this.__on;if(t){for(var n,e=0,r=-1,i=t.length;e<i;++e)n=t[e],o.type&&n.type!==o.type||n.name!==o.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function Ct(u,a,c){return function(){function t(t){e.call(this,t,this.__data__)}var n,e,r=this.__on;e=a;if(r)for(var i=0,o=r.length;i<o;++i)if((n=r[i]).type===u.type&&n.name===u.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=t,n.options=c),void(n.value=a);this.addEventListener(u.type,t,c),n={type:u.type,name:u.name,value:a,listener:t,options:c},r?r.push(n):this.__on=[n]}}function St(t,n,e){var r=ht(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}at.prototype={constructor:at,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},dt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var Et=U().mark(Nt);function Nt(){var n,e,r,i,o,u,a;return U().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this._groups,e=0,r=n.length;case 1:if(!(e<r)){t.next=13;break}i=n[e],o=0,u=i.length;case 3:if(o<u){if(a=i[o])return t.next=7,a;t.next=7}else t.next=10;break;case 7:++o,t.next=3;break;case 10:++e,t.next=1;break;case 13:case"end":return t.stop()}},Et,this)}var Ut=[null];function M(t,n){this._groups=t,this._parents=n}function L(t){return"string"==typeof t?new M([[document.querySelector(t)]],[document.documentElement]):new M([[t]],Ut)}function z(t){return"string"==typeof t?new M([document.querySelectorAll(t)],[document.documentElement]):new M([K(t)],Ut)}function c(t,n){return null==t||null==n?NaN:t<n?-1:n<t?1:n<=t?0:NaN}function Dt(e){var o,u,i;function a(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.length;if(e<r){if(0!==o(n,n))return r;do{var i=e+r>>>1}while(u(t[i],n)<0?e=1+i:r=i,e<r)}return e}return i=2!==e.length?(o=c,u=function(t,n){return c(e(t),n)},function(t,n){return e(t)-n}):(o=e===c||e===function(t,n){return null==t||null==n?NaN:n<t?-1:t<n?1:t<=n?0:NaN}?e:Ot,u=e),{left:a,center:function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=a(t,n,e,(3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.length)-1);return e<r&&i(t[r-1],n)>-i(t[r],n)?r-1:r},right:function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.length;if(e<r){if(0!==o(n,n))return r;do{var i=e+r>>>1}while(u(t[i],n)<=0?e=1+i:r=i,e<r)}return e}}}function Ot(){return 0}M.prototype=(e={constructor:M,select:function(t){"function"!=typeof t&&(t=J(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],c=a.length,l=r[i]=new Array(c),s=0;s<c;++s)(o=a[s])&&(u=t.call(o,o.__data__,s,a))&&("__data__"in o&&(u.__data__=o.__data__),l[s]=u);return new M(r,this._parents)},selectAll:function(t){var n,e;t="function"==typeof t?(e=t,function(){return K(e.apply(this,arguments))}):null==(n=t)?tt:function(){return this.querySelectorAll(n)};for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var c,l=r[a],s=l.length,f=0;f<s;++f)(c=l[f])&&(o.push(t.call(c,c.__data__,f,l)),u.push(c));return new M(o,u)},selectChild:function(t){return this.select(null==t?rt:(n="function"==typeof t?t:nt(t),function(){return et.call(this.children,n)}));var n},selectChildren:function(t){return this.selectAll(null==t?ot:(n="function"==typeof t?t:nt(t),function(){return it.call(this.children,n)}));var n},filter:function(t){var n;"function"!=typeof t&&(n=t,t=function(){return this.matches(n)});for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var u,a=e[o],c=a.length,l=i[o]=[],s=0;s<c;++s)(u=a[s])&&t.call(u,u.__data__,s,a)&&l.push(u);return new M(i,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,st);var e,r=n?lt:ct,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var u=o.length,a=new Array(u),c=new Array(u),l=new Array(u),s=0;s<u;++s){var f=i[s],h=o[s],p=h.length,g="object"===x(g=t.call(f,f&&f.__data__,s,i))&&"length"in g?g:Array.from(g),d=g.length,y=c[s]=new Array(d),v=a[s]=new Array(d);r(f,h,y,v,l[s]=new Array(p),g,n);for(var m,w,b=0,_=0;b<d;++b)if(m=y[b]){for(_<=b&&(_=b+1);!(w=v[_])&&++_<d;);m._next=w||null}}return(a=new M(a,i))._enter=c,a._exit=l,a},enter:function(){return new M(this._enter||this._groups.map(ut),this._parents)},exit:function(){return new M(this._exit||this._groups.map(ut),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit(),r="function"==typeof t?(r=t(r))&&r.selection():r.append(t+"");return null!=n&&(i=(i=n(i))&&i.selection()),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var t=t.selection?t.selection():t,n=this._groups,e=t._groups,r=n.length,t=e.length,i=Math.min(r,t),o=new Array(r),u=0;u<i;++u)for(var a,c=n[u],l=e[u],s=c.length,f=o[u]=new Array(s),h=0;h<s;++h)(a=c[h]||l[h])&&(f[h]=a);for(;u<r;++u)o[u]=n[u];return new M(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];0<=--o;)(r=i[o])&&(u&&4^r.compareDocumentPosition(u)&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e=e||ft;for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var u,a=n[o],c=a.length,l=i[o]=new Array(c),s=0;s<c;++s)(u=a[s])&&(l[s]=u);l.sort(t)}return new M(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){var t,n=0,e=D(this);try{for(e.s();!(t=e.n()).done;){t.value;++n}}catch(t){e.e(t)}finally{e.f()}return n},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,n){var e,t=W(t);return arguments.length<2?(e=this.node(),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)):this.each((null==n?t.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?t.local?function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}:function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}:t.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(t,n))},style:function(t,n,e){return 1<arguments.length?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(n,e,r){return function(){var t=e.apply(this,arguments);null==t?this.style.removeProperty(n):this.style.setProperty(n,t,r)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):(n=this.node(),e=t,n.style.getPropertyValue(e)||ht(n).getComputedStyle(n,null).getPropertyValue(e))},property:function(t,n){return 1<arguments.length?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=pt(t+"");if(arguments.length<2){for(var r=gt(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?yt:vt)(this,t)}}:n?function(t){return function(){yt(this,t)}}:function(t){return function(){vt(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?mt:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?wt:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(bt)},lower:function(){return this.each(_t)},append:function(t){var n="function"==typeof t?t:$(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:$(t),r=null==n?xt:"function"==typeof n?n:J(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Mt)},clone:function(t){return this.select(t?At:Tt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return 0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}),u=o.length;if(!(arguments.length<2)){for(a=n?Ct:kt,r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var c,l=0,s=a.length;l<s;++l)for(r=0,c=a[l];r<u;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return St(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return St(this,t,n)}})(t,n))}},t=Symbol.iterator,n=Nt,(t=B(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e);var Lt=Dt(c).right;Dt(function(t){return null===t?NaN:+t}).center;var jt=function(t){function s(t){var n,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Yt,r=this,i=s;if(!(r instanceof i))throw new TypeError("Cannot call a class as a function");if(n=C(this,s),Object.defineProperties(n,{_intern:{value:new Map},_key:{value:e}}),null!=t){var o,u=D(t);try{for(u.s();!(o=u.n()).done;){var a=O(o.value,2),c=a[0],l=a[1];n.set(c,l)}}catch(t){u.e(t)}finally{u.f()}}return n}var n=s;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&R(n,t),S(s,[{key:"get",value:function(t){return q(s,"get",this,3)([It(this,t)])}},{key:"has",value:function(t){return q(s,"has",this,3)([It(this,t)])}},{key:"set",value:function(t,n){return q(s,"set",this,3)([(t=t,r=(e=this)._intern,e=(0,e._key)(t),r.has(e)?r.get(e):(r.set(e,t),t)),n]);var e,r}},{key:"delete",value:function(t){return q(s,"delete",this,3)([function(t,n){var e=t._intern,t=(0,t._key)(n);e.has(t)&&(n=e.get(t),e.delete(t));return n}(this,t)])}}])}(Z(Map));function It(t,n){var e=t._intern,t=(0,t._key)(n);return e.has(t)?e.get(t):n}function Yt(t){return null!==t&&"object"===x(t)?t.valueOf():t}var Ft=Math.sqrt(50),Ht=Math.sqrt(10),zt=Math.sqrt(2);function Pt(t,n,e){return function t(n,e,r){var i,o,u,a=(e-n)/Math.max(0,r),c=Math.floor(Math.log10(a)),a=a/Math.pow(10,c),a=Ft<=a?10:Ht<=a?5:zt<=a?2:1;return c<0?(u=Math.pow(10,-c)/a,(i=Math.round(n*u))/u<n&&++i,e<(o=Math.round(e*u))/u&&--o,u=-u):(u=Math.pow(10,c)*a,(i=Math.round(n/u))*u<n&&++i,e<(o=Math.round(e/u))*u&&--o),o<i&&.5<=r&&r<2?t(n,e,2*r):[i,o,u]}(t=+t,n=+n,e=+e)[2]}function Rt(t,n,e){e=+e;var r=(n=+n)<(t=+t),t=r?Pt(n,t,e):Pt(t,n,e);return(r?-1:1)*(t<0?1/-t:t)}function qt(t,n){var e;if(void 0===n){var r,i=D(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(e<o||void 0===e&&o<=o)&&(e=o)}}catch(t){i.e(t)}finally{i.f()}}else{var u,a,c=-1,l=D(t);try{for(l.s();!(u=l.n()).done;)null!=(a=n(u.value,++c,t))&&(e<a||void 0===e&&a<=a)&&(e=a)}catch(t){l.e(t)}finally{l.f()}}return e}function Bt(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}var Gt=Symbol("implicit");function Zt(){var i,o,t=function t(){var i=new jt,o=[],e=[],r=Gt;function u(t){var n=i.get(t);if(void 0===n){if(r!==Gt)return r;i.set(t,n=o.push(t)-1)}return e[n%e.length]}return u.domain=function(t){if(!arguments.length)return o.slice();o=[],i=new jt;var n,e=D(t);try{for(e.s();!(n=e.n()).done;){var r=n.value;i.has(r)||i.set(r,o.push(r)-1)}}catch(t){e.e(t)}finally{e.f()}return u},u.range=function(t){return arguments.length?(e=Array.from(t),u):e.slice()},u.unknown=function(t){return arguments.length?(r=t,u):r},u.copy=function(){return t(o,e).unknown(r)},Bt.apply(u,arguments),u}().unknown(void 0),u=t.domain,a=t.range,c=0,l=1,s=!1,f=0,h=0,p=.5;function n(){var t=u().length,n=l<c,e=n?l:c,r=n?c:l,r=(i=(r-e)/Math.max(1,t-f+2*h),s&&(i=Math.floor(i)),e+=(r-e-i*(t-f))*p,o=i*(1-f),s&&(e=Math.round(e),o=Math.round(o)),function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}(t).map(function(t){return e+i*t}));return a(n?r.reverse():r)}return delete t.unknown,t.domain=function(t){return(arguments.length?(u(t),n):u)()},t.range=function(t){return arguments.length?(t=O(t,2),c=+(c=t[0]),l=+(l=t[1]),n()):[c,l]},t.rangeRound=function(t){t=O(t,2);return c=+(c=t[0]),l=+(l=t[1]),s=!0,n()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(t){return arguments.length?(s=!!t,n()):s},t.padding=function(t){return arguments.length?(f=Math.min(1,h=+t),n()):f},t.paddingInner=function(t){return arguments.length?(f=Math.min(1,t),n()):f},t.paddingOuter=function(t){return arguments.length?(h=+t,n()):h},t.align=function(t){return arguments.length?(p=Math.max(0,Math.min(1,t)),n()):p},t.copy=function(){return Zt(u(),[c,l]).round(s).paddingInner(f).paddingOuter(h).align(p)},Bt.apply(n(),arguments)}function Vt(){return function t(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return t(e())},n}(Zt.apply(null,arguments).paddingInner(1))}function Qt(t,n,e){(t.prototype=n.prototype=e).constructor=t}function Wt(t,n){var e,r=Object.create(t.prototype);for(e in n)r[e]=n[e];return r}function l(){}var t="\\s*([+-]?\\d+)\\s*",n="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$t=/^#([0-9a-f]{3,8})$/,Xt=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),Jt=new RegExp("^rgb\\(".concat(e,",").concat(e,",").concat(e,"\\)$")),Kt=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(n,"\\)$")),tn=new RegExp("^rgba\\(".concat(e,",").concat(e,",").concat(e,",").concat(n,"\\)$")),nn=new RegExp("^hsl\\(".concat(n,",").concat(e,",").concat(e,"\\)$")),en=new RegExp("^hsla\\(".concat(n,",").concat(e,",").concat(e,",").concat(n,"\\)$")),rn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function on(){return this.rgb().formatHex()}function un(){return this.rgb().formatRgb()}function an(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=$t.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?cn(n):3===e?new u(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?ln(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?ln(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Xt.exec(t))?new u(n[1],n[2],n[3],1):(n=Jt.exec(t))?new u(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Kt.exec(t))?ln(n[1],n[2],n[3],n[4]):(n=tn.exec(t))?ln(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=nn.exec(t))?gn(n[1],n[2]/100,n[3]/100,1):(n=en.exec(t))?gn(n[1],n[2]/100,n[3]/100,n[4]):rn.hasOwnProperty(t)?cn(rn[t]):"transparent"===t?new u(NaN,NaN,NaN,0):null}function cn(t){return new u(t>>16&255,t>>8&255,255&t,1)}function ln(t,n,e,r){return new u(t=r<=0?n=e=NaN:t,n,e,r)}function sn(t,n,e,r){return 1===arguments.length?(i=(i=t)instanceof l?i:an(i))?new u((i=i.rgb()).r,i.g,i.b,i.opacity):new u:new u(t,n,e,null==r?1:r);var i}function u(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function fn(){return"#".concat(i(this.r)).concat(i(this.g)).concat(i(this.b))}function hn(){var t=pn(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(r(this.r),", ").concat(r(this.g),", ").concat(r(this.b)).concat(1===t?")":", ".concat(t,")"))}function pn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function r(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function i(t){return((t=r(t))<16?"0":"")+t.toString(16)}function gn(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||1<=e?t=n=NaN:n<=0&&(t=NaN),new s(t,n,e,r)}function dn(t){var n,e,r,i,o,u,a,c;return t instanceof s?new s(t.h,t.s,t.l,t.opacity):(t=t instanceof l?t:an(t))?t instanceof s?t:(n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),u=NaN,c=((o=Math.max(n,e,r))+i)/2,(a=o-i)?(u=n===o?(e-r)/a+6*(e<r):e===o?(r-n)/a+2:(n-e)/a+4,a/=c<.5?o+i:2-o-i,u*=60):a=0<c&&c<1?0:u,new s(u,a,c,t.opacity)):new s}function s(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function yn(t){return(t=(t||0)%360)<0?t+360:t}function vn(t){return Math.max(0,Math.min(1,t||0))}function mn(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}Qt(l,an,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:on,formatHex:on,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return dn(this).formatHsl()},formatRgb:un,toString:un}),Qt(u,sn,Wt(l,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new u(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new u(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new u(r(this.r),r(this.g),r(this.b),pn(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fn,formatHex:fn,formatHex8:function(){return"#".concat(i(this.r)).concat(i(this.g)).concat(i(this.b)).concat(i(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:hn,toString:hn})),Qt(s,function(t,n,e,r){return 1===arguments.length?dn(t):new s(t,n,e,null==r?1:r)},Wt(l,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new s(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new s(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*n,e=2*e-n;return new u(mn(240<=t?t-240:120+t,e,n),mn(t,e,n),mn(t<120?240+t:t-120,e,n),this.opacity)},clamp:function(){return new s(yn(this.h),vn(this.s),vn(this.l),pn(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=pn(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(yn(this.h),", ").concat(100*vn(this.s),"%, ").concat(100*vn(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));var wn=function(t){return function(){return t}};function bn(o){return 1==(o=+o)?_n:function(t,n){return n-t?(e=t,r=n,i=o,e=Math.pow(e,i),r=Math.pow(r,i)-e,i=1/i,function(t){return Math.pow(e+t*r,i)}):wn(isNaN(t)?n:t);var e,r,i}}function _n(t,n){var e,r,i=n-t;return i?(e=t,r=i,function(t){return e+t*r}):wn(isNaN(t)?n:t)}var xn=function t(n){var u=bn(n);function e(n,t){var e=u((n=sn(n)).r,(t=sn(t)).r),r=u(n.g,t.g),i=u(n.b,t.b),o=_n(n.opacity,t.opacity);return function(t){return n.r=e(t),n.g=r(t),n.b=i(t),n.opacity=o(t),n+""}}return e.gamma=t,e}(1);function Mn(n,e){e=e||[];var r,i=n?Math.min(e.length,n.length):0,o=e.slice();return function(t){for(r=0;r<i;++r)o[r]=n[r]*(1-t)+e[r]*t;return o}}function Tn(t,n){for(var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),o=new Array(e),u=0;u<r;++u)i[u]=Un(t[u],n[u]);for(;u<e;++u)o[u]=n[u];return function(t){for(u=0;u<r;++u)o[u]=i[u](t);return o}}function An(n,e){var r=new Date;return n=+n,e=+e,function(t){return r.setTime(n*(1-t)+e*t),r}}function kn(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Cn(t,n){var e,r={},i={};for(e in null!==t&&"object"===x(t)||(t={}),n=null!==n&&"object"===x(n)?n:{})e in t?r[e]=Un(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var Sn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,En=new RegExp(Sn.source,"g");function Nn(t,r){var n,e,i,o,u,a=Sn.lastIndex=En.lastIndex=0,c=-1,l=[],s=[];for(t+="",r+="";(n=Sn.exec(t))&&(e=En.exec(r));)(i=e.index)>a&&(i=r.slice(a,i),l[c]?l[c]+=i:l[++c]=i),(n=n[0])===(e=e[0])?l[c]?l[c]+=e:l[++c]=e:(l[++c]=null,s.push({i:c,x:kn(n,e)})),a=En.lastIndex;return a<r.length&&(i=r.slice(a),l[c]?l[c]+=i:l[++c]=i),l.length<2?s[0]?(u=s[0].x,function(t){return u(t)+""}):(o=r,function(){return o}):(r=s.length,function(t){for(var n,e=0;e<r;++e)l[(n=s[e]).i]=n.x(t);return l.join("")})}function Un(t,n){var e=x(n);return null==n||"boolean"===e?wn(n):("number"===e?kn:"string"===e?(e=an(n))?(n=e,xn):Nn:n instanceof an?xn:n instanceof Date?An:(e=n,!ArrayBuffer.isView(e)||e instanceof DataView?Array.isArray(n)?Tn:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?Cn:kn:Mn))(t,n)}function Dn(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function On(t){return+t}var Ln=[0,1];function T(t){return t}function jn(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:(t=isNaN(e)?NaN:.5,function(){return t});var t}function In(t,n,e){var r=t[0],t=t[1],i=n[0],n=n[1],i=t<r?(r=jn(t,r),e(n,i)):(r=jn(r,t),e(i,n));return function(t){return i(r(t))}}function Yn(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),u=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<r;)i[u]=jn(e[u],e[u+1]),o[u]=n(t[u],t[u+1]);return function(t){var n=Lt(e,t,1,r)-1;return o[n](i[n](t))}}function Fn(){var e,r,n,i,o,u,a=Ln,c=Ln,l=Un,s=T;function f(){var n,e,t,r=Math.min(a.length,c.length);return s!==T&&(n=a[0],(e=a[r-1])<n&&(t=n,n=e,e=t),s=function(t){return Math.max(n,Math.min(e,t))}),i=2<r?Yn:In,o=u=null,h}function h(t){return null==t||isNaN(t=+t)?n:(o=o||i(a.map(e),c,l))(e(s(t)))}return h.invert=function(t){return s(r((u=u||i(c,a.map(e),kn))(t)))},h.domain=function(t){return arguments.length?(a=Array.from(t,On),f()):a.slice()},h.range=function(t){return arguments.length?(c=Array.from(t),f()):c.slice()},h.rangeRound=function(t){return c=Array.from(t),l=Dn,f()},h.clamp=function(t){return arguments.length?(s=!!t||T,f()):s!==T},h.interpolate=function(t){return arguments.length?(l=t,f()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(t,n){return e=t,r=n,f()}}var Hn=new Date,zn=new Date;function f(o,u,e,r){function a(t){return o(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return o(t=new Date(+t)),t},a.ceil=function(t){return o(t=new Date(t-1)),u(t,1),o(t),t},a.round=function(t){var n=a(t),e=a.ceil(t);return t-n<e-t?n:e},a.offset=function(t,n){return u(t=new Date(+t),null==n?1:Math.floor(n)),t},a.range=function(t,n,e){var r,i=[];if(t=a.ceil(t),e=null==e?1:Math.floor(e),t<n&&0<e)for(;i.push(r=new Date(+t)),u(t,e),o(t),r<t&&t<n;);return i},a.filter=function(e){return f(function(t){if(t<=t)for(;o(t),!e(t);)t.setTime(t-1)},function(t,n){if(t<=t)if(n<0)for(;++n<=0;)for(;u(t,-1),!e(t););else for(;0<=--n;)for(;u(t,1),!e(t););})},e&&(a.count=function(t,n){return Hn.setTime(+t),zn.setTime(+n),o(Hn),o(zn),Math.floor(e(Hn,zn))},a.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?a.filter(r?function(t){return r(t)%n==0}:function(t){return a.count(0,t)%n==0}):a:null}),a}var Pn=f(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t}),Rn=(Pn.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?f(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):Pn:null},1e3),h=6e4,p=36e5,g=864e5,qn=7*g,Bn=365*g,j=f(function(t){t.setTime(t-t.getMilliseconds())},function(t,n){t.setTime(+t+n*Rn)},function(t,n){return(n-t)/Rn},function(t){return t.getUTCSeconds()}),Gn=(j.range,f(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Rn)},function(t,n){t.setTime(+t+n*h)},function(t,n){return(n-t)/h},function(t){return t.getMinutes()})),t=(Gn.range,f(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*h)},function(t,n){return(n-t)/h},function(t){return t.getUTCMinutes()})),Zn=(t.range,f(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Rn-t.getMinutes()*h)},function(t,n){t.setTime(+t+n*p)},function(t,n){return(n-t)/p},function(t){return t.getHours()})),e=(Zn.range,f(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+n*p)},function(t,n){return(n-t)/p},function(t){return t.getUTCHours()})),Vn=(e.range,f(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*h)/g},function(t){return t.getDate()-1})),Qn=(Vn.range,f(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/g},function(t){return t.getUTCDate()-1})),n=(Qn.range,f(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/g},function(t){return Math.floor(t/g)}));function a(n){return f(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*h)/qn})}n.range;var Wn=a(0),$n=a(1),Xn=a(2),Jn=a(3),d=a(4),Kn=a(5),y=a(6);function v(n){return f(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/qn})}Wn.range,$n.range,Xn.range,Jn.range,d.range,Kn.range,y.range;var te=v(0),ne=v(1),Xn=v(2),Jn=v(3),m=v(4),Kn=v(5),y=v(6),ee=(te.range,ne.range,Xn.range,Jn.range,m.range,Kn.range,y.range,f(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),Xn=(ee.range,f(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),I=(Xn.range,f(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()})),w=(I.every=function(e){return isFinite(e=Math.floor(e))&&0<e?f(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null},f(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));function re(o,t,n,e,r,i){var u=[[j,1,Rn],[j,5,5e3],[j,15,15e3],[j,30,3e4],[i,1,h],[i,5,3e5],[i,15,9e5],[i,30,18e5],[r,1,p],[r,3,3*p],[r,6,6*p],[r,12,432e5],[e,1,g],[e,2,2*g],[n,1,qn],[t,1,2592e6],[t,3,7776e6],[o,1,Bn]];function a(t,n,e){var r=Math.abs(n-t)/e,i=Dt(function(t){return O(t,3)[2]}).right(u,r);return i===u.length?o.every(Rt(t/Bn,n/Bn,e)):0===i?Pn.every(Math.max(Rt(t,n,e),1)):(t=O(u[r/u[i-1][2]<u[i][2]/r?i-1:i],2))[0].every(t[1])}return[function(t,n,e){var r=n<t,i=(r&&(t=(i=[n,t])[0],n=i[1]),e&&"function"==typeof e.range?e:a(t,n,e)),e=i?i.range(t,+n+1):[];return r?e.reverse():e},a]}w.every=function(e){return isFinite(e=Math.floor(e))&&0<e?f(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};Jn=O(re(w,Xn,te,n,e,t),2);Jn[0];var Kn=O(re(I,ee,Wn,Vn,Zn,Gn),2),ie=Kn[0],oe=Kn[1];function ue(t){var n;return 0<=t.y&&t.y<100?((n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L)).setFullYear(t.y),n):new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ae(t){var n;return 0<=t.y&&t.y<100?((n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L))).setUTCFullYear(t.y),n):new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ce(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function le(t){var r=t.dateTime,i=t.date,o=t.time,n=t.periods,e=t.days,u=t.shortDays,a=t.months,c=t.shortMonths,l=ge(n),s=de(n),f=ge(e),h=de(e),p=ge(u),g=de(u),d=ge(a),y=de(a),v=ge(c),m=de(c),w={a:function(t){return u[t.getDay()]},A:function(t){return e[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Ie,e:Ie,f:Pe,g:Je,G:tr,H:Ye,I:Fe,j:He,L:ze,m:Re,M:qe,p:function(t){return n[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Mr,s:Tr,S:Be,u:Ge,U:Ze,V:Qe,w:We,W:$e,x:null,X:null,y:Xe,Y:Ke,Z:nr,"%":xr},b={a:function(t){return u[t.getUTCDay()]},A:function(t){return e[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:er,e:er,f:ar,g:mr,G:br,H:rr,I:ir,j:or,L:ur,m:cr,M:lr,p:function(t){return n[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Mr,s:Tr,S:sr,u:fr,U:hr,V:gr,w:dr,W:yr,x:null,X:null,y:vr,Y:wr,Z:_r,"%":xr},_={a:function(t,n,e){n=p.exec(n.slice(e));return n?(t.w=g.get(n[0].toLowerCase()),e+n[0].length):-1},A:function(t,n,e){n=f.exec(n.slice(e));return n?(t.w=h.get(n[0].toLowerCase()),e+n[0].length):-1},b:function(t,n,e){n=v.exec(n.slice(e));return n?(t.m=m.get(n[0].toLowerCase()),e+n[0].length):-1},B:function(t,n,e){n=d.exec(n.slice(e));return n?(t.m=y.get(n[0].toLowerCase()),e+n[0].length):-1},c:function(t,n,e){return T(t,r,n,e)},d:ke,e:ke,f:De,g:xe,G:_e,H:Se,I:Se,j:Ce,L:Ue,m:Ae,M:Ee,p:function(t,n,e){n=l.exec(n.slice(e));return n?(t.p=s.get(n[0].toLowerCase()),e+n[0].length):-1},q:Te,Q:Le,s:je,S:Ne,u:ve,U:me,V:we,w:ye,W:be,x:function(t,n,e){return T(t,i,n,e)},X:function(t,n,e){return T(t,o,n,e)},y:xe,Y:_e,Z:Me,"%":Oe};function x(c,l){return function(t){var n,e,r,i=[],o=-1,u=0,a=c.length;for(t instanceof Date||(t=new Date(+t));++o<a;)37===c.charCodeAt(o)&&(i.push(c.slice(u,o)),null!=(e=se[n=c.charAt(++o)])?n=c.charAt(++o):e="e"===n?" ":"0",(r=l[n])&&(n=r(t,e)),i.push(n),u=o+1);return i.push(c.slice(u,o)),i.join("")}}function M(i,o){return function(t){var n,e,r=ce(1900,void 0,1);if(T(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!o||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(n=4<(e=(n=ae(ce(r.y,0,1))).getUTCDay())||0===e?ne.ceil(n):ne(n),n=Qn.offset(n,7*(r.V-1)),r.y=n.getUTCFullYear(),r.m=n.getUTCMonth(),r.d=n.getUTCDate()+(r.w+6)%7):(n=4<(e=(n=ue(ce(r.y,0,1))).getDay())||0===e?$n.ceil(n):$n(n),n=Vn.offset(n,7*(r.V-1)),r.y=n.getFullYear(),r.m=n.getMonth(),r.d=n.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),e="Z"in r?ae(ce(r.y,0,1)).getUTCDay():ue(ce(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(e+5)%7:r.w+7*r.U-(e+6)%7);return("Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,ae):ue)(r)}}function T(t,n,e,r){for(var i,o,u=0,a=n.length,c=e.length;u<a;){if(c<=r)return-1;if(37===(i=n.charCodeAt(u++))){if(i=n.charAt(u++),!(o=_[i in se?n.charAt(u++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return w.x=x(i,w),w.X=x(o,w),w.c=x(r,w),b.x=x(i,b),b.X=x(o,b),b.c=x(r,b),{format:function(t){var n=x(t+="",w);return n.toString=function(){return t},n},parse:function(t){var n=M(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=x(t+="",b);return n.toString=function(){return t},n},utcParse:function(t){var n=M(t+="",!0);return n.toString=function(){return t},n}}}var se={"-":"",_:" ",0:"0"},b=/^\s*\d+/,fe=/^%/,he=/[\\^$*+?|[\]().{}]/g;function _(t,n,e){var r=t<0?"-":"",t=(r?-t:t)+"",i=t.length;return r+(i<e?new Array(e-i+1).join(n)+t:t)}function pe(t){return t.replace(he,"\\$&")}function ge(t){return new RegExp("^(?:"+t.map(pe).join("|")+")","i")}function de(t){return new Map(t.map(function(t,n){return[t.toLowerCase(),n]}))}function ye(t,n,e){n=b.exec(n.slice(e,e+1));return n?(t.w=+n[0],e+n[0].length):-1}function ve(t,n,e){n=b.exec(n.slice(e,e+1));return n?(t.u=+n[0],e+n[0].length):-1}function me(t,n,e){n=b.exec(n.slice(e,e+2));return n?(t.U=+n[0],e+n[0].length):-1}function we(t,n,e){n=b.exec(n.slice(e,e+2));return n?(t.V=+n[0],e+n[0].length):-1}function be(t,n,e){n=b.exec(n.slice(e,e+2));return n?(t.W=+n[0],e+n[0].length):-1}function _e(t,n,e){n=b.exec(n.slice(e,e+4));return n?(t.y=+n[0],e+n[0].length):-1}function xe(t,n,e){n=b.exec(n.slice(e,e+2));return n?(t.y=+n[0]+(68<+n[0]?1900:2e3),e+n[0].length):-1}function Me(t,n,e){n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),e+n[0].length):-1}function Te(t,n,e){n=b.exec(n.slice(e,e+1));return n?(t.q=3*n[0]-3,e+n[0].length):-1}function Ae(t,n,e){n=b.exec(n.slice(e,e+2));return n?(t.m=n[0]-1,e+n[0].length):-1}function ke(t,n,e){n=b.exec(n.slice(e,e+2));return n?(t.d=+n[0],e+n[0].length):-1}function Ce(t,n,e){n=b.exec(n.slice(e,e+3));return n?(t.m=0,t.d=+n[0],e+n[0].length):-1}function Se(t,n,e){n=b.exec(n.slice(e,e+2));return n?(t.H=+n[0],e+n[0].length):-1}function Ee(t,n,e){n=b.exec(n.slice(e,e+2));return n?(t.M=+n[0],e+n[0].length):-1}function Ne(t,n,e){n=b.exec(n.slice(e,e+2));return n?(t.S=+n[0],e+n[0].length):-1}function Ue(t,n,e){n=b.exec(n.slice(e,e+3));return n?(t.L=+n[0],e+n[0].length):-1}function De(t,n,e){n=b.exec(n.slice(e,e+6));return n?(t.L=Math.floor(n[0]/1e3),e+n[0].length):-1}function Oe(t,n,e){n=fe.exec(n.slice(e,e+1));return n?e+n[0].length:-1}function Le(t,n,e){n=b.exec(n.slice(e));return n?(t.Q=+n[0],e+n[0].length):-1}function je(t,n,e){n=b.exec(n.slice(e));return n?(t.s=+n[0],e+n[0].length):-1}function Ie(t,n){return _(t.getDate(),n,2)}function Ye(t,n){return _(t.getHours(),n,2)}function Fe(t,n){return _(t.getHours()%12||12,n,2)}function He(t,n){return _(1+Vn.count(I(t),t),n,3)}function ze(t,n){return _(t.getMilliseconds(),n,3)}function Pe(t,n){return ze(t,n)+"000"}function Re(t,n){return _(t.getMonth()+1,n,2)}function qe(t,n){return _(t.getMinutes(),n,2)}function Be(t,n){return _(t.getSeconds(),n,2)}function Ge(t){t=t.getDay();return 0===t?7:t}function Ze(t,n){return _(Wn.count(I(t)-1,t),n,2)}function Ve(t){var n=t.getDay();return 4<=n||0===n?d(t):d.ceil(t)}function Qe(t,n){return t=Ve(t),_(d.count(I(t),t)+(4===I(t).getDay()),n,2)}function We(t){return t.getDay()}function $e(t,n){return _($n.count(I(t)-1,t),n,2)}function Xe(t,n){return _(t.getFullYear()%100,n,2)}function Je(t,n){return _((t=Ve(t)).getFullYear()%100,n,2)}function Ke(t,n){return _(t.getFullYear()%1e4,n,4)}function tr(t,n){var e=t.getDay();return _((t=4<=e||0===e?d(t):d.ceil(t)).getFullYear()%1e4,n,4)}function nr(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+_(t/60|0,"0",2)+_(t%60,"0",2)}function er(t,n){return _(t.getUTCDate(),n,2)}function rr(t,n){return _(t.getUTCHours(),n,2)}function ir(t,n){return _(t.getUTCHours()%12||12,n,2)}function or(t,n){return _(1+Qn.count(w(t),t),n,3)}function ur(t,n){return _(t.getUTCMilliseconds(),n,3)}function ar(t,n){return ur(t,n)+"000"}function cr(t,n){return _(t.getUTCMonth()+1,n,2)}function lr(t,n){return _(t.getUTCMinutes(),n,2)}function sr(t,n){return _(t.getUTCSeconds(),n,2)}function fr(t){t=t.getUTCDay();return 0===t?7:t}function hr(t,n){return _(te.count(w(t)-1,t),n,2)}function pr(t){var n=t.getUTCDay();return 4<=n||0===n?m(t):m.ceil(t)}function gr(t,n){return t=pr(t),_(m.count(w(t),t)+(4===w(t).getUTCDay()),n,2)}function dr(t){return t.getUTCDay()}function yr(t,n){return _(ne.count(w(t)-1,t),n,2)}function vr(t,n){return _(t.getUTCFullYear()%100,n,2)}function mr(t,n){return _((t=pr(t)).getUTCFullYear()%100,n,2)}function wr(t,n){return _(t.getUTCFullYear()%1e4,n,4)}function br(t,n){var e=t.getUTCDay();return _((t=4<=e||0===e?m(t):m.ceil(t)).getUTCFullYear()%1e4,n,4)}function _r(){return"+0000"}function xr(){return"%"}function Mr(t){return+t}function Tr(t){return Math.floor(+t/1e3)}var Ar=(y=le({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,kr=y.parse,Xn=y.utcFormat,n=y.utcParse,e="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||Xn(e);var Cr=+new Date("2000-01-01T00:00:00.000Z")?function(t){return t=new Date(t),isNaN(t)?null:t}:n(e);function Sr(t){return new Date(t)}function Er(t){return t instanceof Date?+t:+new Date(+t)}function Nr(e,a,n,r,i,o,u,c,l,s){var f=Fn()(T,T),h=f.invert,p=f.domain,g=s(".%L"),d=s(":%S"),y=s("%I:%M"),v=s("%I %p"),m=s("%a %d"),w=s("%b %d"),b=s("%B"),_=s("%Y");function x(t){return(l(t)<t?g:c(t)<t?d:u(t)<t?y:o(t)<t?v:r(t)<t?i(t)<t?m:w:n(t)<t?b:_)(t)}return f.invert=function(t){return new Date(h(t))},f.domain=function(t){return arguments.length?p(Array.from(t,Er)):p().map(Sr)},f.ticks=function(t){var n=p();return e(n[0],n[n.length-1],null==t?10:t)},f.tickFormat=function(t,n){return null==n?x:s(n)},f.nice=function(t){var n,e,r,i,o,u=p();return(t=t&&"function"==typeof t.range?t:a(u[0],u[u.length-1],null==t?10:t))?p((t=t,e=0,r=(u=(u=u).slice()).length-1,i=u[e],(o=u[r])<i&&(n=e,e=r,r=n,n=i,i=o,o=n),u[e]=t.floor(i),u[r]=t.ceil(o),u)):f},f.copy=function(){return t=f,Nr(e,a,n,r,i,o,u,c,l,s).domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},f}var Y={second:"%Y-%m-%d %H:%M:%S",minute:"%Y-%m-%d %H:%M",hour:"%Y-%m-%d %H:00",day:"%Y-%m-%d",week:"%Y week %W",month:"%Y-%m",quarter:"%Y-Q%Q",year:"%Y"};function Ur(i){return Object.keys(i).reduce(function(t,n){var e,r;return t[n]=(e=t,r=i[n],function(t){return r(t),e}),t},{})}var Dr="milestones",Or=Dr+"__category_label",Lr=Dr+"__group",F=Lr+"__label",jr=F+"-last",Ir=F+"-above",Yr=F+"__text",Fr=Yr+"__title",Hr=Yr+"__event",zr=Hr+"--hover",H={DISTRIBUTION:"top-bottom",OPTIMIZE:!1,ORIENTATION:"horizontal",SCALE_TYPE:"time",MAPPING:{category:void 0,entries:void 0,timestamp:"timestamp",value:"value",text:"text",url:"url",id:"id",textStyle:"textStyle",titleStyle:"titleStyle"},LABEL_FORMAT:"%Y-%m-%d %H:%M",USE_LABELS:!0,AGGREGATE_BY:"minute",AUTO_RESIZE:!0,URL_TARGET:"_self"};function Pr(t,n){t%=2;return"top"===n?t=!0:"bottom"===n&&(t=!1),0<t}var A="$";function Rr(){}function qr(t,n){var e=new Rr;if(t instanceof Rr)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var u in t)e.set(u,t[u]);return e}function Br(){var h,p,n,g=[],u=[];function d(t,e,r,i){if(e>=g.length)return null!=h&&t.sort(h),null!=p?p(t):t;for(var n,o,u,a=-1,c=t.length,l=g[e++],s=qr(),f=r();++a<c;)(u=s.get(n=l(o=t[a])+""))?u.push(o):s.set(n,[o]);return s.each(function(t,n){i(f,n,d(t,e,r,i))}),f}return n={object:function(t){return d(t,0,Gr,Zr)},map:function(t){return d(t,0,Vr,Qr)},entries:function(t){return function e(t,r){var i,o;return++r>g.length?t:(o=u[r-1],null!=p&&r>=g.length?i=t.entries():(i=[],t.each(function(t,n){i.push({key:n,values:e(t,r)})})),null!=o?i.sort(function(t,n){return o(t.key,n.key)}):i)}(d(t,0,Vr,Qr),0)},key:function(t){return g.push(t),n},sortKeys:function(t){return u[g.length-1]=t,n},sortValues:function(t){return h=t,n},rollup:function(t){return p=t,n}}}function Gr(){return{}}function Zr(t,n,e){t[n]=e}function Vr(){return qr()}function Qr(t,n,e){t.set(n,e)}function Wr(){}Rr.prototype=qr.prototype={constructor:Rr,has:function(t){return A+t in this},get:function(t){return this[A+t]},set:function(t,n){return this[A+t]=n,this},remove:function(t){t=A+t;return t in this&&delete this[t]},clear:function(){for(var t in this)t[0]===A&&delete this[t]},keys:function(){var t,n=[];for(t in this)t[0]===A&&n.push(t.slice(1));return n},values:function(){var t,n=[];for(t in this)t[0]===A&&n.push(this[t]);return n},entries:function(){var t,n=[];for(t in this)t[0]===A&&n.push({key:t.slice(1),value:this[t]});return n},size:function(){var t,n=0;for(t in this)t[0]===A&&++n;return n},empty:function(){for(var t in this)if(t[0]===A)return!1;return!0},each:function(t){for(var n in this)n[0]===A&&t(this[n],n.slice(1),this)}};t=qr.prototype;function $r(t,n){return parseInt(t.style[n].replace("px",""),10)}Wr.prototype={constructor:Wr,has:t.has,add:function(t){return this[A+(t+="")]=t,this},remove:t.remove,clear:t.clear,values:t.keys,size:t.size,empty:t.empty,each:t.each};function Xr(S,E,N,U,D,O,L,j,I,Y){for(var F=10<arguments.length&&void 0!==arguments[10]?arguments[10]:"time",t=Br().key(function(t){return z(t).data()[0].timelineIndex}).entries(L._groups),H="top-bottom"===E?2:1,n=0,e=0;e=function(k){var C=0;return t.forEach(function(t){var A=t.values;A.forEach(function(t){var n=z(t).data()[0],o="horizontal"===O?60:20,u="horizontal"===O?A.length-n.index-1:n.index,a=z(A[u]).data()[0],t="ordinal"===F?a.key:S(a.key),c=Y(t),e=A[u][0],r=u===A.length-1,i=(r||"top-bottom"!==E||(r=u===A.length-2&&j-c<60),"horizontal"===O?"offsetWidth":"offsetHeight"),l="horizontal"===O?"width":"height",t=$r(e,l),s=z(A[u]),f=!!r||ri(s).classed(jr),h="horizontal"===O?"offsetHeight":"offsetWidth",p="horizontal"===O?"padding-bottom":"padding-right",g="horizontal"===O?"padding-top":"padding-left",d=Pr(u,E)?p:g,y=f?c-t<0:j<c+t;if(0===k&&(f=!!r||y,s.style(d,"0px"),ri(s).classed(jr,f)),e[i]>t||t<o||f||y){var v,m,w,b=null,_=0,x="horizontal"===O?H-1:1+H;do{}while("horizontal"===O?x++:x--,_++,0<x&&(m=(v=(v=(m=ni(u,H,A,h,O))<=(w="horizontal"===O?ni(u,-1*H,A,h,O):m)&&!r)||r?v:c<o)?m:w,w=v?H:-1*H,s.style(d,(m=r?0:m)+"px"),ri(s).classed(jr,!v),b=Kr(S,e,u,U,D,n,w,m,c,l,h,O,L,j,Y,v,F)),b<e[i]&&_<ei);"horizontal"===O&&(b=Math.min(N,b)),s.style(I,b+"px");var M,T,t=P(s.select(".wrapper"),"width");t<b&&(b=t+6,s.style(I,b+"px")),0<k&&"horizontal"===O&&(y=P(s,"width"),M=f?c-y:c+y,A.forEach(function(t,n){var e,r,i=z(t).data()[0];i.key===a.key||ii(u,H,n)||(i="ordinal"===F?i.key:S(i.key),e=i=Y(i)-5,n=z(A[n]),r=ri(n).classed(jr),f&&!r&&(i=i+P(n,"width")+5),!f&&r&&(i=i-P(n,"width")-5),(f?M<i:e<M)&&(f?e<c:c<e)&&(r=t[0][h],P(s,d)<r)&&(n=f?i-M:M-e,t=P(s,I)-n-6,o<t?(b=Math.min(b,t),s.style(I,"".concat(b,"px"))):s.style(d,"".concat(r+5,"px")),C++))}),T=Number.POSITIVE_INFINITY,A.forEach(function(t,n){(Pr(n,E)?p:g)==d&&(n=z(A[n]),n=P(n,d),T=Math.min(T,n))}),0<T)&&A.forEach(function(t,n){var e;0==(n+u%H)%H&&(n=z(A[n]),e=P(n,d),n.style(d,"".concat(e-T,"px")))})}})}),C}(n),1===++n&&(e=1),n<ei&&0<e;);}var Jr=6,Kr=function(t,n,e,r,i,o,u,a,c,l,s,f,h,p,g){var d,y=!(15<arguments.length&&void 0!==arguments[15])||arguments[15],v=16<arguments.length&&void 0!==arguments[16]?arguments[16]:"time",m="horizontal"===f&&y?e+u:e-u;do{if("horizontal"===f&&y?m+=u:m-=u,void 0===(d=h._groups[m]))break}while(a>=d[0][s]);e=(void 0===r.category?i[o.timelineIndex]:i[o.timelineIndex].entries)[m],r=$r(n,l);return r=void 0!==e?(i=g("ordinal"===v?e.key:t(e.key)),"horizontal"===f&y?i-c-Jr:"horizontal"===f&!y?i-Jr:c-i-Jr):"horizontal"===f&y?p-c-Jr:c-Jr,u<0?Math.min(c,r):r},ti=function(t,n,e,r){return"horizontal"===t?n[e+r]:n[e-r]},ni=function(t,n,e,r,i){i=ti(i,e,t,n),e=0;return e=void 0!==i?i[0][r]+3:e},ei=20,P=function(t,n){return parseInt(t.style(n).replace("px",""),10)},ri=function(t){return t.select(function(){return this.parentNode})},ii=function(t,n,e){return 0!=(e+t%n)%n};function oi(t){var e;return"%Y-Q%Q"===t?(e=Ar(Y.month),function(t){var t=e(t),n=t.split("-")[1],n=Math.ceil(parseInt(n)/3);return t.split("-")[0]+"-Q"+n}):Ar(t)}function ui(t){var e;return"%Y-Q%Q"===t?(e=kr(Y.month),function(t){var n;return-1===t.search("-Q")?(n=(n=3*Math.ceil(parseInt(t.split("-")[1])/3)-2+"").length<2?"0"+n:n,e(t.split("-")[0]+"-"+n)):(n=(n=3*parseInt(t.split("-")[1][1])+"").length<2?"0"+n:n,e(t.split("-")[0]+"-"+n))}):kr(t)}function ai(n,t,e,r,i){function o(t){return"ordinal"===u?t[e.value]:n(r(t[e.timestamp]))}var u=4<arguments.length&&void 0!==i?i:"time";return void 0!==e.category&&void 0!==e.entries?t.map(function(t,n){return{category:t[e.category],entries:a(t[e.entries],n)}}):(t=void 0===t||Array.isArray(t[0])?t:[t]).map(a);function a(t,e){var r,n=("ordinal"===u?Br().key(o):Br().key(o).sortKeys(c)).entries(t);return"ordinal"===u&&(r={},t.forEach(function(t,n){t=o(t);r[t]||0===r[t]||(r[t]=n)}),n.sort(function(t,n){return(r[t.key]||0)-(r[n.key]||0)})),n.map(function(t,n){return t.index=n,t.timelineIndex=e,t.scaleType=u,t})}}return function(h){var p,g,d,y,v,m,w,b,_=H.DISTRIBUTION,x=H.OPTIMIZE,M=H.ORIENTATION,T=H.SCALE_TYPE,A=Cr,k=Object.assign({},H.MAPPING);function n(t){p=oi(t)}function t(t){d=t}function e(t){"string"==typeof t&&["_blank","_self","_parent","_top"].includes(t.toLowerCase())&&(y=t)}function C(t){return"function"==typeof v&&(L(this).classed(zr,!0),v(t)),t}function S(t){return"function"==typeof v&&(L(this).classed(zr,!1),m(t)),t}function E(t){return"function"==typeof w&&w(t),t}n(H.LABEL_FORMAT),t(H.USE_LABELS),e(H.URL_TARGET);var N=oi(Y[H.AGGREGATE_BY]),U=ui(Y[H.AGGREGATE_BY]),r={current:H.AUTO_RESIZE};function i(t){var n="horizontal"===M?"width":"height",e="horizontal"===M?"margin-left":"margin-top",r="horizontal"===M?"milestones__horizontal_line":"milestones__vertical_line",a="horizontal"===M?180:100,i=L(h).selectAll("."+Dr),c=void 0!==t?ai(N,t,k,A,T):i.data(),t=i.data(c),i=t.enter().append("div").attr("class",Dr),o=(t.exit().remove(),parseFloat(L(h).style(n))-11),t=((void 0!==k.category?(i.append("div").attr("class",Or).text(function(t){return t.category}),i.append("div").attr("class","data-js-timeline")):i).append("div").attr("class",r),t.merge(i)),u=[],i=t.selectAll("."+Or),l=(i.each(function(t,n,e){u.push(e[n].offsetWidth)}),Math.round(qt(u)||0)),s=o-l-10;i.style("width",l+"px"),"vertical"===M&&(i.style("margin-left","-50%"),i.style("text-align","center")),t.selectAll(".data-js-timeline").style(e,l+10+"px"),t.selectAll("."+r).style(n,s+"px");var o=(void 0===k.category?t:t.selectAll(".data-js-timeline")).selectAll("."+Lr).data(function(t){return void 0===k.category?t:t.entries}),i=c.reduce(function(n,t){return(void 0===k.category?t:t.entries).map(function(t){return n.push(t.key)}),n},[]),l=void 0!==g?g.map(U):function(t,n){var e,r;if(void 0===n){var i,o=D(t);try{for(o.s();!(i=o.n()).done;){var u=i.value;null!=u&&(void 0===e?u<=u&&(e=r=u):(u<e&&(e=u),r<u&&(r=u)))}}catch(t){o.e(t)}finally{o.f()}}else{var a,c,l=-1,s=D(t);try{for(s.s();!(a=s.n()).done;)null!=(c=n(a.value,++l,t))&&(void 0===e?c<=c&&(e=r=c):(c<e&&(e=c),r<c&&(r=c)))}catch(t){s.e(t)}finally{s.f()}}return[e,r]}(i,function(t){return U(t)}),f="ordinal"===T?Vt().range([0,s]).domain(i):function(){return Bt.apply(Nr(ie,oe,I,ee,Wn,Vn,Zn,Gn,j,Ar).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().rangeRound([0,s]).domain(l),r=o.enter().append("div").attr("class",Lr),i=(o.exit().remove(),r.append("div").attr("class","milestones__group__bullet"),r.merge(o).style(e,function(t){t="ordinal"===(t.scaleType=T)?t.key:U(t.key);return f(t)+"px"}));d?(o=(r=(l=i.selectAll("."+F+"-"+M).data(function(t){return[t]})).enter().append("div").attr("class",F+"-"+M).merge(l).classed(Ir+"-"+M,function(t){return Pr(t.index,_)}).selectAll("."+Yr+"-"+M).data(function(t){return[t]})).enter().append("div").attr("class",Yr+"-"+M).merge(r).style(n,function(t){var n,e,r="ordinal"===(t.scaleType=T)?t.key:U(t.key),r=f(r),i=t.index+1,o="top-bottom"===_?2:1,o=(void 0===k.category?(e=c[t.timelineIndex][t.index+o],u=c[t.timelineIndex][t.index-o],c[t.timelineIndex]):(e=c[t.timelineIndex].entries[t.index+o],u=c[t.timelineIndex].entries[t.index-o],c[t.timelineIndex].entries)).length,t="horizontal"===M?e:u,u="horizontal"===M?u:e,r=(void 0!==t?(e="ordinal"===(t.scaleType=T)?t.key:U(t.key),t=f(e),n="horizontal"===M?t-r:r-t,o-i==2&&(n/=2)):o-i==1?n="horizontal"===M?s-r:r:o-i==0&&(n=void 0!==u?(e="ordinal"===(u.scaleType=T)?u.key:U(u.key),t=f(e),"horizontal"===M?(s-t)/2:t/2):s),Math.max(0,n-6));return Math.min("horizontal"===M?a:r,r)+"px"}).each(function(t){var e,r,n=Pr(t.index,_),i=L(this),o=(i.html(null),t.values.reduce(function(t,n){return void 0!==n[k.titleStyle]?Object.assign(t,n[k.titleStyle]):t},{})),u=i.append("div").classed("wrapper",!0);n&&"vertical"!==M||(e=u.append("span").classed(Fr,!0),"ordinal"===T?e.text(t.key):e.text(p(U(t.key))),Object.entries(o).forEach(function(t){var t=O(t,2),n=t[0];return e.style(n,t[1])}),u.append("br")),t.values.map(function(t,n){0<n&&u.append("br");var n=Object.assign({},t[k.textStyle]),e=t[k.text],r=-1<["jpg","jpeg","gif","png","webp"].indexOf(e.split(".").pop())?u.append("img").classed("milestones-label",!0).classed("milestones-image-label",!0).attr("height","100").attr("src",e):(t[k.url]?u.append("a").classed("milestones-label",!0).classed("milestones-link-label",!0).attr("href",t[k.url]).attr("target",y):u.append("span").classed("milestones-label",!0).classed("milestones-text-label",!0)).text(e);t[k.id]&&r.attr("id",t[k.id]),r.datum({text:t[k.text],timestamp:t[k.timestamp],attributes:t}),"function"!=typeof w&&"function"!=typeof m&&"function"!=typeof v||r.classed(Hr,!0),"function"==typeof w&&r.on("click",E),"function"==typeof m&&r.on("mouseleave",S),"function"==typeof v&&r.on("mouseover",C),Object.entries(n).forEach(function(t){var t=O(t,2),n=t[0];return r.style(n,t[1])})}),n&&"horizontal"===M&&(u.append("br"),r=u.append("span").classed(Fr,!0),"ordinal"===T?r.text(t.key):r.text(p(U(t.key))),Object.entries(o).forEach(function(t){var t=O(t,2),n=t[0];return r.style(n,t[1])}))}),(e=r.merge(o)).style("padding-top","0px").style("padding-bottom","0px"),x&&Xr(U,_,a,k,c,M,e,s,n,f,T)):i.selectAll("."+F+"-"+M).remove(),t.each(function(t,n,e){var r=qt(L(e[n]).selectAll("* ."+Ir+"-"+M)._groups[0],function(t){return t.offsetHeight}),i=qt(L(e[n]).selectAll("* :not(."+Ir+"-"+M+")")._groups[0],function(t){return t.offsetHeight});"horizontal"===M?L(e[n]).style("margin-top",10+(r||0)+"px").style("height",10+(i||0)+"px"):(r=void 0!==k.category?Math.round(100/(c.length+1))*(n+1):"50",L(e[n]).style("margin-top","50px").style("margin-left",r+"%").style("position","absolute"))}),"function"==typeof b&&b()}return new ResizeObserver(function(){null!==L(h).node()&&window.requestAnimationFrame(function(){r.current&&i()})}).observe("string"==typeof h?document.querySelector(h):h),Ur({aggregateBy:function(t){N=oi(Y[t]),U=ui(Y[t]),n(Y[t])},mapping:function(t){k=Object.assign({},k,t)},optimize:function(t){x=t},autoResize:function(t){r.current=t},orientation:function(t){M=t,L(h).html("")},distribution:function(t){_=t},scaleType:function(t){"time"!==t&&"ordinal"!==t||(T=t,L(h).html(""))},parseTime:function(t){A=ui(t)},labelFormat:n,urlTarget:e,useLabels:t,range:function(t){Array.isArray(t)&&2==t.length&&(g=t)},render:i,renderCallback:function(t){b=t},onEventClick:function(t){w=t},onEventMouseLeave:function(t){m=t},onEventMouseOver:function(t){v=t}})}});